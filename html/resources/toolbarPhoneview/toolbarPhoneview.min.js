var sharingShowing=!1,sharingUI={},shareCurrentPage=!1,toolbarInit=function(){yudu_events.subscribe(yudu_events.ALL,yudu_events.TAP,hideSharing,!1);initSharing()},initSharing=function(){sharingUI={shareButton:$("#share"),dropdown:{container:$("#shareContainer"),currentPage:$("#currentPage"),firstPage:$("#firstPage")}};var a={};sharingUI.dropdown.container.addClass(yudu_commonSettings.isDesktop?"isDesktop":"touchDevice");yudu_commonFunctions.createHammerJSTapManager(sharingUI.dropdown.container[0]).on("tap",
function(d){var b=d.target.id;if(b&&a[b]&&"function"==typeof a[b])a[b](d)});$(".noDrag").on("touchmove",function(){return!1});if(yudu_toolbarSettings.sharing.emailEnabled||yudu_toolbarSettings.sharing.twitter||yudu_toolbarSettings.sharing.facebook)a.currentPage=function(){toggleSharingPage(!0)},a.firstPage=function(){toggleSharingPage(!1)};var c=function(d,b,c){var f=document.getElementById(d),g=document.createElement("img");g.classList.add("noPointerEvents");g.src=b;f.insertBefore(g,f.firstChild);
f.style.display="block";a[d]=e(c)},e=function(a){return function(b){hideSharing();"function"==typeof a&&a(b);yudu_commonFunctions.hideToolbar()}};yudu_toolbarSettings.sharing.emailEnabled&&c("email",yudu_sharingSettings.toolbarIconBasePath+"email.png",yudu_sharingFunctions.shareEmail);yudu_toolbarSettings.sharing.twitter&&c("twitter",yudu_sharingSettings.twitterIconPath,yudu_sharingFunctions.shareTwitter);yudu_toolbarSettings.sharing.facebook&&c("facebook",yudu_sharingSettings.facebookIconPath,yudu_sharingFunctions.shareFacebook);
setSharingLeftPosition()},toggleSharingPage=function(a){a!=shareCurrentPage&&(shareCurrentPage=a,yudu_sharingFunctions.togglePage(a),sharingUI.dropdown.currentPage.toggleClass("selected"),sharingUI.dropdown.firstPage.toggleClass("selected"))},toggleShareAction=function(a){1==a||0==a?toggleSharing(!1,a):toggleSharing(!0)},toggleSharing=function(a,c){var e=a?!sharingShowing:c;if(e==sharingShowing)return sharingShowing;e?sharingUI.dropdown.container.show():sharingUI.dropdown.container.hide();sharingShowing=
e;setSharingLeftPosition();return sharingShowing},setSharingLeftPosition=function(){if(sharingShowing){var a=sharingUI.shareButton.offset().left,a=Math.min(a,yudu_commonSettings.width/yudu_commonSettings.pixelDensity-sharingUI.dropdown.container.width()-10);sharingUI.dropdown.container.css({left:a,width:sharingUI.dropdown.container.width()})}},hideSharing=function(){sharingShowing&&toggleSharing(!1,!1)},cssFiles=[yudu_commonFunctions.createBrandingPath("toolbarPhoneview/style.css")];
yudu_commonFunctions.loadCss(cssFiles,toolbarInit);